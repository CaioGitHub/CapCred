<div class="register-container" [@routeFadeAnimation]>
  <mat-card class="register-card">
    <div class="register-header">
      <button mat-icon-button type="button" (click)="goToLogin()" [disabled]="loading">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <div class="register-logo">
        <img src="assets/logo.png" alt="CapCred Logo" class="logo-img" />
        <h1>Criar conta</h1>
      </div>
    </div>

    <form #registerForm="ngForm" (ngSubmit)="onSubmit(registerForm)">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nome completo</mat-label>
        <input
          matInput
          name="name"
          [(ngModel)]="form.name"
          required
        />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>CPF</mat-label>
        <input
          matInput
          name="cpf"
          [(ngModel)]="form.cpf"
          required
          minlength="11"
        />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input
          matInput
          type="email"
          name="email"
          [(ngModel)]="form.email"
          required
        />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Senha</mat-label>
        <input
          matInput
          type="password"
          name="password"
          [(ngModel)]="form.password"
          required
          minlength="6"
        />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Renda mensal</mat-label>
        <input
          matInput
          type="number"
          name="monthlyIncome"
          [(ngModel)]="form.monthlyIncome"
          required
          min="0"
          step="0.01"
        />
      </mat-form-field>

      <button
        mat-flat-button
        color="primary"
        class="full-width"
        [disabled]="loading || registerForm.invalid"
      >
        <mat-icon *ngIf="!loading">person_add</mat-icon>
        <mat-icon *ngIf="loading" class="spin">autorenew</mat-icon>
        {{ loading ? 'Cadastrando...' : 'Cadastrar' }}
      </button>

      <button
        mat-button
        type="button"
        color="accent"
        class="full-width secondary"
        (click)="goToLogin()"
        [disabled]="loading"
      >
        <mat-icon>login</mat-icon>
        Ja tenho uma conta
      </button>

      <p class="error" *ngIf="error">{{ error }}</p>
    </form>
  </mat-card>
</div>

